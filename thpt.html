<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üåü ƒê·∫øm Ng∆∞·ª£c K·ª≥ Thi THPT Qu·ªëc Gia - Premium</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet" />

<style>
  :root {
    --color-light-bg: #f7f7f7;
    --color-dark-bg: #121212;
    --color-neon-bg: #000014;
    --color-gradient-start: #6a11cb;
    --color-gradient-end: #2575fc;

    --color-light-text: #222;
    --color-dark-text: #eee;
    --color-accent: #ff3c78;
    --color-accent-neon: #00ffe7;

    --font-family: 'Poppins', sans-serif;
  }

  /* Reset */
  * {
    margin: 0; padding: 0; box-sizing: border-box;
  }

  body {
    font-family: var(--font-family);
    background: var(--color-light-bg);
    color: var(--color-light-text);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
    transition: background 0.5s, color 0.5s;
    overflow-x: hidden;
    position: relative;
  }

  /* THEME DARK */
  body.dark {
    background: var(--color-dark-bg);
    color: var(--color-dark-text);
  }

  /* THEME NEON */
  body.neon {
    background: var(--color-neon-bg);
    color: var(--color-accent-neon);
  }

  /* THEME GRADIENT */
  body.gradient {
    background: linear-gradient(135deg, var(--color-gradient-start), var(--color-gradient-end));
    color: white;
  }

  /* Container */
  .container {
    background: rgba(255 255 255 / 0.15);
    backdrop-filter: blur(15px);
    border-radius: 25px;
    box-shadow:
      0 0 10px rgba(255, 60, 120, 0.4),
      0 0 20px rgba(37, 117, 252, 0.3);
    max-width: 500px;
    width: 100%;
    padding: 30px 35px;
    text-align: center;
    position: relative;
    transition: background 0.5s ease;
  }

  body.dark .container {
    background: rgba(18,18,18,0.7);
    box-shadow: 0 0 15px #ff3c78;
  }

  body.neon .container {
    background: rgba(0, 0, 20, 0.7);
    box-shadow: 0 0 20px #00ffe7, 0 0 40px #00ffe7;
  }

  body.gradient .container {
    background: rgba(255 255 255 / 0.2);
    box-shadow: 0 0 25px 3px rgba(255 255 255 / 0.3);
  }

  h1 {
    font-weight: 700;
    font-size: 2.5rem;
    margin-bottom: 15px;
    letter-spacing: 1.2px;
    text-shadow: 0 0 10px var(--color-accent);
  }

  .current-time {
    font-size: 1.3rem;
    margin-bottom: 20px;
    font-weight: 600;
  }

  .countdown {
    font-size: 2.2rem;
    font-weight: 700;
    letter-spacing: 1px;
    color: var(--color-accent);
    margin-bottom: 30px;
    text-shadow:
      0 0 5px var(--color-accent),
      0 0 10px var(--color-accent),
      0 0 20px var(--color-accent);
    transition: color 0.3s ease;
  }

  body.dark .countdown {
    color: #ff6584;
    text-shadow:
      0 0 10px #ff6584,
      0 0 20px #ff6584,
      0 0 30px #ff6584;
  }

  body.neon .countdown {
    color: var(--color-accent-neon);
    text-shadow:
      0 0 10px var(--color-accent-neon),
      0 0 20px var(--color-accent-neon),
      0 0 30px var(--color-accent-neon);
  }

  /* Controls */
  .controls {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 15px;
  }

  input[type="date"] {
    padding: 10px 15px;
    border-radius: 15px;
    border: none;
    font-size: 1rem;
    flex: 1 1 180px;
    box-shadow: 0 0 5px rgba(0,0,0,0.1);
    transition: box-shadow 0.3s ease;
  }
  input[type="date"]:focus {
    outline: none;
    box-shadow: 0 0 12px var(--color-accent);
  }

  select, button {
    padding: 10px 20px;
    border-radius: 20px;
    border: none;
    font-size: 1rem;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  select {
    flex: 1 1 140px;
  }

  button {
    background: var(--color-accent);
    color: white;
    font-weight: 600;
  }
  button:hover {
    background: #e03267;
  }

  /* Topbar Buttons */
  .topbar {
    position: fixed;
    top: 15px;
    right: 15px;
    display: flex;
    gap: 12px;
    z-index: 1000;
  }

  .topbar button {
    background: rgba(0,0,0,0.5);
    color: white;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    font-size: 18px;
    line-height: 40px;
    text-align: center;
    border: none;
    box-shadow: 0 0 10px rgba(255, 60, 120, 0.7);
    transition: background-color 0.3s ease;
  }

  .topbar button:hover {
    background: var(--color-accent);
    box-shadow: 0 0 15px var(--color-accent);
  }

  /* Responsive */
  @media (max-width: 500px) {
    .countdown {
      font-size: 1.7rem;
    }
    h1 {
      font-size: 1.8rem;
    }
    .controls {
      flex-direction: column;
    }
    input[type="date"], select, button {
      flex: unset;
      width: 100%;
      margin-bottom: 10px;
    }
  }

  /* Particle container */
  #particles-js {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    z-index: -1;
  }

  /* Audio controls */
  #audio-controls {
    margin-top: 15px;
    display: flex;
    justify-content: center;
    gap: 15px;
    align-items: center;
  }
  #audio-controls button {
    background: transparent;
    box-shadow: none;
    color: var(--color-accent);
    font-size: 24px;
  }
  #audio-volume {
    width: 120px;
  }

  /* Popup tips */
  #tip-popup {
    position: fixed;
    bottom: 20px;
    left: 20px;
    background: rgba(255 255 255 / 0.9);
    padding: 15px 20px;
    border-radius: 15px;
    box-shadow: 0 0 15px rgba(0,0,0,0.15);
    max-width: 300px;
    font-size: 0.95rem;
    color: #222;
    cursor: pointer;
    user-select: none;
    transition: opacity 0.3s ease;
  }
  body.dark #tip-popup {
    background: rgba(18,18,18,0.9);
    color: #eee;
    box-shadow: 0 0 20px #ff3c78;
  }
  body.neon #tip-popup {
    background: rgba(0,0,20,0.85);
    color: var(--color-accent-neon);
    box-shadow: 0 0 25px var(--color-accent-neon);
  }
  #tip-popup.hide {
    opacity: 0;
    pointer-events: none;
  }
</style>

</head>
<body>

<div id="particles-js"></div>

<div class="topbar">
  <button id="btn-theme" title="Chuy·ªÉn ƒë·ªïi theme">üåó</button>
  <button id="btn-mute" title="B·∫≠t / t·∫Øt nh·∫°c">üîà</button>
</div>

<div class="container">
  <h1>‚è≥ ƒê·∫øm Ng∆∞·ª£c K·ª≥ Thi THPT Qu·ªëc Gia</h1>
  <div class="current-time" id="current-time">ƒêang t·∫£i gi·ªù...</div>

  <div class="countdown" id="countdown">-- : -- : -- : --</div>

  <div class="controls">
    <input type="date" id="exam-date" title="Ch·ªçn ng√†y thi" />
    <select id="exam-type" title="Ch·ªçn k·ª≥ thi">
      <option value="main">K·ª≥ thi ch√≠nh</option>
      <option value="mock">K·ª≥ thi th·ª≠</option>
      <option value="math">To√°n</option>
      <option value="literature">Ng·ªØ VƒÉn</option>
      <option value="english">Ti·∫øng Anh</option>
    </select>
    <button id="set-date-btn">C·∫≠p nh·∫≠t</button>
  </div>

  <div id="audio-controls">
    <button id="audio-playpause" title="Ph√°t / T·∫°m d·ª´ng nh·∫°c">‚ñ∂Ô∏è</button>
    <input type="range" id="audio-volume" min="0" max="1" step="0.01" value="0.4" title="√Çm l∆∞·ª£ng" />
  </div>
</div>

<div id="tip-popup" title="B·∫•m ƒë·ªÉ ƒë√≥ng">
  <strong>M·∫πo √¥n t·∫≠p:</strong> H√£y gi·ªØ s·ª©c kh·ªèe v√† h·ªçc t·∫≠p ƒë·ªÅu ƒë·∫∑n m·ªói ng√†y!
</div>

<!-- YouTube iframe API -->
<script src="https://www.youtube.com/iframe_api"></script>

<!-- particles.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

<script>
  // particles.js config
  particlesJS('particles-js', {
    "particles": {
      "number": {"value": 80, "density": {"enable": true,"value_area": 800}},
      "color": {"value": ["#ff3c78", "#2575fc", "#00ffe7"]},
      "shape": {"type": "circle"},
      "opacity": {"value": 0.6, "random": true},
      "size": {"value": 3, "random": true},
      "line_linked": {"enable": true, "distance": 120, "color": "#ff3c78", "opacity": 0.2, "width": 1},
      "move": {"enable": true, "speed": 3, "direction": "none", "random": true, "straight": false}
    },
    "interactivity": {
      "detect_on": "canvas",
      "events": {"onhover": {"enable": true,"mode": "grab"}, "onclick": {"enable": true,"mode": "push"}},
      "modes": {"grab": {"distance": 150,"line_linked": {"opacity": 0.4}}, "push": {"particles_nb": 4}}
    },
    "retina_detect": true
  });

  // Time + Countdown Logic
  const currentTimeEl = document.getElementById('current-time');
  const countdownEl = document.getElementById('countdown');
  const examDateInput = document.getElementById('exam-date');
  const examTypeSelect = document.getElementById('exam-type');
  const setDateBtn = document.getElementById('set-date-btn');
  const tipPopup = document.getElementById('tip-popup');

  // YouTube Music Setup
  let player;
  let isPlaying = false;
  let volume = 0.4;
  const musicPlaylist = [
    "NgQSlTcwsRM", // M·∫´u nh·∫°c YouTube ID (thay b·∫±ng ID b√†i b·∫°n th√≠ch)
    "s4Oj-as4Lfg",
    "jpEqb8mX58E"
  ];
  let currentTrackIndex = 0;

  function onYouTubeIframeAPIReady() {
    player = new YT.Player('hidden-player', {
      height: '0',
      width: '0',
      videoId: musicPlaylist[currentTrackIndex],
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange
      }
    });
  }
  function onPlayerReady(event) {
    event.target.setVolume(volume * 100);
  }
  function onPlayerStateChange(event) {
    if (event.data === YT.PlayerState.ENDED) {
      // Chuy·ªÉn b√†i
      currentTrackIndex = (currentTrackIndex + 1) % musicPlaylist.length;
      player.loadVideoById(musicPlaylist[currentTrackIndex]);
      player.playVideo();
    }
  }
  function playPauseMusic() {
    if (!player) return;
    if (isPlaying) {
      player.pauseVideo();
      isPlaying = false;
      btnAudioPlayPause.textContent = '‚ñ∂Ô∏è';
    } else {
      player.playVideo();
      isPlaying = true;
      btnAudioPlayPause.textContent = '‚è∏Ô∏è';
    }
  }
  function setVolumeMusic(v) {
    volume = v;
    if (player) player.setVolume(volume * 100);
  }

  // Theme switching
  const themes = ['light', 'dark', 'neon', 'gradient'];
  let currentThemeIndex = 0;

  function loadTheme() {
    const saved = localStorage.getItem('theme');
    if (saved && themes.includes(saved)) {
      currentThemeIndex = themes.indexOf(saved);
    }
    applyTheme();
  }
  function applyTheme() {
    document.body.className = themes[currentThemeIndex];
    localStorage.setItem('theme', themes[currentThemeIndex]);
  }
  function toggleTheme() {
    currentThemeIndex = (currentThemeIndex + 1) % themes.length;
    applyTheme();
  }

  // Countdown function
  function updateCountdown(targetDate) {
    const now = new Date();
    const diff = targetDate - now;
    if (diff <= 0) {
      countdownEl.textContent = "üî• K·ª≥ thi ƒë√£ b·∫Øt ƒë·∫ßu!";
      return;
    }
    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
    const minutes = Math.floor((diff / (1000 * 60)) % 60);
    const seconds = Math.floor((diff / 1000) % 60);
    countdownEl.textContent = `${days} ng√†y : ${hours.toString().padStart(2,'0')} gi·ªù : ${minutes.toString().padStart(2,'0')} ph√∫t : ${seconds.toString().padStart(2,'0')} gi√¢y`;
  }

  // Current time update
  function updateCurrentTime() {
    const now = new Date();
    const timeStr = now.toLocaleString('vi-VN', { timeZone: 'Asia/Ho_Chi_Minh' });
    currentTimeEl.textContent = `B√¢y gi·ªù: ${timeStr}`;
  }

  // Save & load exam date + type
  function saveExamData() {
    localStorage.setItem('examDate', examDateInput.value);
    localStorage.setItem('examType', examTypeSelect.value);
  }
  function loadExamData() {
    const date = localStorage.getItem('examDate');
    const type = localStorage.getItem('examType');
    if (date) examDateInput.value = date;
    if (type) examTypeSelect.value = type;
  }

  // Popup tips hide
  tipPopup.addEventListener('click', () => {
    tipPopup.classList.add('hide');
  });

  // Audio controls
  const btnAudioPlayPause = document.getElementById('audio-playpause');
  const audioVolumeSlider = document.getElementById('audio-volume');
  btnAudioPlayPause.addEventListener('click', () => {
    playPauseMusic();
  });
  audioVolumeSlider.addEventListener('input', (e) => {
    setVolumeMusic(e.target.value);
  });

  // Theme toggle button
  document.getElementById('btn-theme').addEventListener('click', () => {
    toggleTheme();
  });

  // Set date button
  setDateBtn.addEventListener('click', () => {
    saveExamData();
  });

  // Init
  loadTheme();
  loadExamData();

  let targetDate = examDateInput.value ? new Date(examDateInput.value + "T00:00:00+07:00") : new Date(new Date().getFullYear(), 5, 7, 7, 0, 0);

  // Update countdown every second
  setInterval(() => {
    updateCurrentTime();
    targetDate = examDateInput.value ? new Date(examDateInput.value + "T00:00:00+07:00") : targetDate;
    updateCountdown(targetDate);
  }, 1000);

</script>

<!-- Hidden YouTube player div -->
<div id="hidden-player" style="display:none;"></div>

</body>
</html>
